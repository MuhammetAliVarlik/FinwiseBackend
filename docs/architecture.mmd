graph TD
    %% Nodes
    User(("User / Browser"))
    
    subgraph "Docker Network (finwise_net)"
        FE["Frontend Container<br>React + Vite<br>Port: 3000"]
        API["API Gateway<br>FastAPI<br>Port: 8000"]
        DB[("PostgreSQL<br>Port: 5432")]
        
        subgraph "AI Subsystem"
            LLM["Scribe Engine<br>FastAPI Logic Layer<br>Port: 8001"]
            Ollama["Inference Node<br>Llama-3 (GGUF)<br>Port: 11434"]
        end
    end
    
    %% Flows
    User <-->|"HTTP / WebSocket"| FE
    FE <-->|"REST API (JSON)"| API
    API <-->|"SQL"| DB
    API <-->|"Internal HTTP"| LLM
    LLM <-->|"LLM API"| Ollama
    
    %% Styles
    classDef container fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef db fill:#fff3e0,stroke:#e65100,stroke-width:2px;
    classDef user fill:#fff,stroke:#333,stroke-width:2px;
    
    class FE,API,LLM,Ollama container;
    class DB db;
    class User user;